<html>
  <head>
    <!-- Pull the engine from the Quintus CDN or load it locally -->
    <!-- (use quintus-all.min.js for production) -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src='src/quintus/quintus.js'></script>
    <script src='src/quintus/quintus_sprites.js'></script>
    <script src='src/quintus/quintus_scenes.js'></script>
    <script src='src/quintus/quintus_input.js'></script>
    <script src='src/quintus/quintus_anim.js'></script>
    <script src='src/quintus/quintus_2d.js'></script>
    <script src='src/quintus/quintus_touch.js'></script>
    <script src='src/quintus/quintus_ui.js'></script>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

  </head>
  <body>
    <canvas id='game' width='500' height='500'></canvas>

    <!-- Global variables and scripts -->
    <script>
      // Full screen hack.
      canvas = document.getElementById("game");
      canvas.width = document.body.clientWidth; //document.width is obsolete
      canvas.height = document.body.clientHeight; //document.height is obsolete
      canvasW = canvas.width;
      canvasH = canvas.height;


      // Now set up your game (most games will load a separate .js file)
      var Q = Quintus()                          // Create a new engine instance
      .include("Sprites, Scenes, Input, 2D, Touch, UI") // Load any needed modules
      .setup("game")                     // Add a canvas element onto the page
      .controls()                        // Add in default controls (keyboard, buttons)
      .touch();                          // Add in touch support (for the UI)
      var textboxScene = 1
    </script>

    <!-- Game objects -->
    <script src="./src/player.js"></script>
    <script src="./src/puzzle.js"></script>
    <script src="./src/enemy.js"></script>
    <script src="./src/util.js"></script>

    <!-- Game levels -->
    <script src="./src/gui/main.js"></script>
    <script src="./src/levels/level1.js"></script>

    <!-- End screen scene -->
    <script>
    // To display a game over / game won popup box,
    // create a endGame scene that takes in a `label` option
    // to control the displayed message.
    Q.scene('endGame',function(stage) {
      var container = stage.insert(new Q.UI.Container({
        x: Q.width/2, y: Q.height/2, fill: "rgba(0,0,0,0.5)"
      }));

      var button = container.insert(new Q.UI.Button({ x: 0, y: 0, fill: "#CCCCCC", label: "Play Again" }))
      var label = container.insert(new Q.UI.Text({x:10, y: -10 - button.p.h, label: stage.options.label }));
      // When the button is clicked, clear all the stages
      // and restart the game.
      button.on("click",function() {
        Q.clearStages();
        Q.stageScene('level1');
      });

      // Expand the container to visibily fit it's contents
      container.fit(20);
    });
    </script>

    <!-- Load all assets and stage first scene. Begin game here. -->
    <script>
      // Q.load can be called at any time to load additional assets
      // assets that are already loaded will be skipped
      window.Q.load("sprites.png, sprites.json, level1.tmx, tilemap.png, tiles.png, objects.json, player1.png",
      // The callback will be triggered when everything is loaded
      function() {
        // Sprites sheets can be created manually
        Q.sheet("tiles","tiles.png", { tilew: 32, tileh: 32 });
        Q.sheet("tilemap","tilemap.png", { tilew: 70, tileh: 70 });
        Q.sheet("player1","player1.png", { tilew: 47, tileh: 66 });

        // Or from a .json asset that defines sprite locations
        Q.compileSheets("sprites.png","sprites.json");

        // Finally, call stageScene to run the game
        Q.stageScene("mainMenu");
      })
    </script>
  </body>
</html>
